<!DOCTYPE html>
<html lang="en">
<head>
                <title>meandering journey - Articles with tag IT misadventures</title>
        <meta charset="utf-8" />
        <link href="../theme/css/main.css" type="text/css" rel="stylesheet" />
                <link href="http://meandering.journey.sk/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="meandering journey Full Atom Feed" />
                                                <link href="http://meandering.journey.sk/feeds/.atom.xml" type="application/atom+xml" rel="alternate" title="meandering journey Categories Atom Feed" />
                                        </head>

<body id="index" class="home">
  <div class="all">
  <div class="extra-info">
  
    <aside>
  <h3>About the blog</h3>
  A platform to practice my written communication skills.
  The range of topics tends to surprise even myself.
</aside>
<aside>
  <h3>About the author</h3>
  My name is Ján Hušták. I live near
  <a href="http://maps.google.com/maps?q=bratislava&z=6">Bratislava</a>.
  I've been developing software professionally since 1998.
  The Java platform has served me well but I don't dwell on it.
</aside>
<aside>
  <h3>Links</h3>
  <a href="http://www.journey.sk">Main site</a>,
  <a href="http://coding.journey.sk">projects page</a>,
  <a href="https://github.com/codingjourney">GitHub</a>.
  Sorry, no social networks. I do read mail sent to
  coding &#97;&#116; journey.sk.
</aside>    
    <aside class="links">
  <h3>            <a href="#" class="disabled">&laquo;</a>
        Page 1 / 4
            <a href="../tag/it-misadventures2.html">&raquo;</a>
    </h3>
      <a href="#much-more-fun-with-planning-poker">Much more fun with Planning poker</a>
      <a href="#too-much-fun-with-planning-poker">Too much fun with Planning poker</a>
      <a href="#what-i-did-last-summer">What I did last summer</a>
      <a href="#pimp-my-calendar-aftermath">PIMp my calendar: Aftermath</a>
      <a href="#pimp-my-calendar-part-5">PIMp my calendar, part 5</a>
      <a href="#pimp-my-calendar-part-4">PIMp my calendar, part 4</a>
      <a href="#pimp-my-calendar-part-3">PIMp my calendar, part 3</a>
      <a href="#pimp-my-calendar-part-2">PIMp my calendar, part 2</a>
    </aside>
  <aside id="tags">
  <h3>Tags</h3>
          <a href="../tag/motivation.html">motivation</a>
      -     <a href="../tag/htpc.html">HTPC</a>
      -     <a href="../tag/openbsd.html">OpenBSD</a>
      -     <a href="../tag/qt.html">Qt</a>
      -     <a href="../tag/upsheet.html">upsheet</a>
      -     <a href="../tag/python.html">Python</a>
      -     <a href="../tag/kde.html">KDE</a>
      -     <a href="../tag/cloud-computing.html">cloud computing</a>
      -     <a href="../tag/caldav.html">CalDAV</a>
      -     <a href="../tag/howto.html">howto</a>
      -     <a href="../tag/jetty.html">Jetty</a>
      -     <a href="../tag/craftsmanship.html">craftsmanship</a>
      -     <a href="../tag/meta.html">meta</a>
      -     <a href="../tag/music.html">music</a>
      -     <a href="../tag/it-misadventures.html">IT misadventures</a>
      -     <a href="../tag/algorithms.html">algorithms</a>
      -     <a href="../tag/android.html">Android</a>
      -     <a href="../tag/cups.html">CUPS</a>
      -     <a href="../tag/security.html">security</a>
      -     <a href="../tag/html5.html">HTML5</a>
    </aside>
    
  
  </div><!-- /.extra-info -->
  <div class="main-column">
  <header id="banner" class="body">
    <h1><a href="..">meandering<img src="../theme/images/logo.png"/>journey</a></h1>
  </header><!-- /#banner -->
        <section id="content">
<h2>Articles tagged with "IT misadventures"</h2>

<article class="hentry">
  <header>
    <h3>
      <a name="much-more-fun-with-planning-poker"></a>
      <a href="../much-more-fun-with-planning-poker.html" rel="bookmark" title="Permalink to Much more fun with Planning poker">Much more fun with Planning poker</a>
    </h3>
  </header>
  <footer class="post-info">
      Published on <abbr class="published" title="2015-06-08T19:00:00"> Mon 08 June 2015 </abbr> under
        <a href="../tag/html5.html">HTML5</a>,        <a href="../tag/it-misadventures.html">IT misadventures</a>      </footer><!-- /.post-info -->
  <div class="entry-content"> <p>When I wrote about my <em>Planning poker</em> app <a href="../too-much-fun-with-planning-poker.html">for the first time</a>, I had invested 3.5 hours into the app itself plus some more time into rescuing its version history. Things have been moving forward since then. More precisely, they've been moving in several different directions - sometimes all at once - for about 16 more coding hours.</p>
<p>What bothered me about the first "finished" version were slight glitches in the layout. Some gaps between cards were one pixel wider than the rest and it was just <em>wrong</em>. The wrongness was exacerbated by the fact that the cards were being carefully laid out by a script upon page load (I had to use <a href="http://www.w3.org/TR/CSS2/visuren.html#absolute-positioning">absolute positioning</a> due to the particular transition effect I had come up with).</p>
<p>I decided to fix both problems by letting CSS do its thing and using an overlaid extra card for the transition (yeah, I called it "joker"). It simplified the code and removed the layout irregularities. It also introduced aliasing artifacts. In other words, edges of cards were getting blurred at certain viewport sizes. The new transition mechanic also didn't work flawlessly - it glitched when you poked the app during the transition. I chalked it up as a failed experiment (the best kind!) and decided to be rigorous.</p>
<p>In the end, I have a responsive layout script that works with a size unit one might call <em>VRSTAWPP</em> (<a href="http://dev.w3.org/csswg/css-values-3/#viewport-relative-lengths">vmin</a> reduced slightly to align with <a href="http://www.quirksmode.org/blog/archives/2010/04/a_pixel_is_not.html">physical pixels</a>). The entire layout takes up 100 <em>VRSTAWPP</em> on the shorter side of the display and however many are necessary on the longer side. As it's a reduced vmin, there may be extra pixels left. I distribute those as evenly and symmetrically as possible. The result is a joy to look at, provided you have a phone-vs.-eyes setup that lets you discern individual pixels. Otherwise you just won't care.</p>
<p>So what's next? <em>Planning poker</em> is now in that weird limbo between a project and a product. I'm  happy with how it works but there are still bits that need polishing:</p>
<ul>
<li>the cards look like they were designed by a programmer</li>
<li>there is no proper logo and no proper icon to show in the Firefox Marketplace</li>
<li>the app has no proper name to distinguish it from other Planning poker efforts</li>
<li>only one <a href="http://en.wikipedia.org/wiki/Planning_poker#Equipment">deck of cards</a> is supported</li>
<li>there are other features I'd like to add (OK, those are "nice to haves")</li>
</ul>
<p>As for cross-browser support, testing in Chrome has indicated that the web platform is as inconsistent as ever. There's a schism, for instance, when changing the <em>transition</em> CSS property on an element while it is transitioning: Chrome cancels the running transition immediately, Firefox lets it finish. The app is thus pretty much unusable in Chrome. I haven't done any testing in other browsers.</p>
<p>You can check out the current version of <em>Planning poker</em> at my modest <a href="http://coding.journey.sk/">projects page</a>. The page features an install link as well; if clicked in a recent Firefox, it should store the entire app on your device for easy offline use. On Android and Debian it even gets nicely integrated into the appropriate menu.</p>
<p>I have yet to seriously try turning <em>Planning poker</em> into a faux-native Android app (for possible inclusion in the <a href="https://f-droid.org/">F-Droid market</a>). I've played with <a href="https://hacks.mozilla.org/2014/06/testing-your-native-android-app/">mozilla-apk-cli</a> but the resulting .apk weighs just 1.4 MB and I don't suppose it'd work on a device without Firefox installed.</p>
<p>I'm not really sure this is worth pursuing further but at least I could try publishing it into the <a href="https://marketplace.firefox.com/">Firefox Marketplace</a>. As of now it only contains two other Planning poker apps, what a shame :-)</p> </div><!-- /.entry-content -->
  <hr/>
</article>
<article class="hentry">
  <header>
    <h3>
      <a name="too-much-fun-with-planning-poker"></a>
      <a href="../too-much-fun-with-planning-poker.html" rel="bookmark" title="Permalink to Too much fun with Planning poker">Too much fun with Planning poker</a>
    </h3>
  </header>
  <footer class="post-info">
      Published on <abbr class="published" title="2015-04-01T19:30:00"> Wed 01 April 2015 </abbr> under
        <a href="../tag/html5.html">HTML5</a>,        <a href="../tag/it-misadventures.html">IT misadventures</a>      </footer><!-- /.post-info -->
  <div class="entry-content"> <p>The new team lead on my current project started using Planning poker for estimation. It turned out that all colleagues except me had installed a corresponding smartphone app in order to avoid mucking about with actual paper cards. The apps are exceedingly simple: all the cards are displayed on the screen, you tap one and it fills the entire screen, you tap it again to restore the initial view. Pretty graphics and fancy animated transitions are just about the only embellishments.</p>
<p>My Fairphone comes without Google Play and I usually fulfill my app needs through F-Droid, the app store dedicated to open source offerings. To my surprise, F-Droid offered no Planning poker app (granted, the store is rather small at about 1000 items). I decided to build my own, of course. Given my current interests, I chose to write it as a HTML5 page instead of a native Android job.</p>
<p>I was done in about 30 minutes and the result was perfectly adequate for the intended purpose. It was pretty spartan, though, so I spent about an hour tweaking the visuals and two more hours adding an animated transition effect. I did all the work in one file without any version control and by the end I wished I had kept track of the various stages. I hadn't done much work in HTML5 before and there was a lot of trial and error involved, especially concerning CSS (I have to thank the friendly spirits at Stackoverflow, MDN and W3C, of course, for speeding up the journey immensely).</p>
<p>And then I found out that I had, in fact, kept all the intermediate versions without even knowing about it! You see, I had set up a shortcut to the Poker page on my Android home screen to speed things up a bit. As it happens, each time I tapped the icon, Firefox opened the page in a new tab. By the time I noticed, I had 60 open tabs. It's a pretty annoying behavior, if you ask me, but in this case it provided a welcome benefit: all iterations of my creation were neatly laid out in chronological order. I only had to save them as separate files.</p>
<p>Yeah, I didn't think it would be simple, either. Firefox for Android offers just one "Save as" option: "Save as PDF" which wasn't much use to me as I was after the source code. The Firefox Add-ons page yielded an interesting extension called "View Source Code". I installed it pronto, only to find out that it displayed the source code of the <em>latest</em> version of the file, regardless of which tab I was looking at (all the tabs had the same URL and the extension obviously reloads the source in order to display it).</p>
<p>I tried another extension: "Save as TXT". This one saved only the text visible on the rendered page, of course, which wasn't that useful either. The extension looked rather simple, though, so I downloaded it and poked around in <em>its</em> source code to see if I could adapt it for my purposes. I had had some exposure to the XUL universe before so I wasn't completely confused but even so, the task was far from simple.</p>
<p>My biggest hurdle consisted of the fact that I had to iterate here as well but couldn't restart Firefox in between (lest I lose all my precious tabs!). I found out that uninstalling an extension and installing a newer version of it leaves some hooks registered by the older version in place (something a restart would surely fix) so my changes weren't taking effect. I had to install each new version with a different extension ID, making the whole process pretty cumbersome.</p>
<p>In the end, I bludgeoned the extension into doing what I needed after 8 or 9 iterations. It took two and a half hours and the result was a primitive hack. Having to activate the extension 60x by hand afterwards wasn't much fun either. I did rescue the history of my Planning poker page, however, and that's all that matters.</p> </div><!-- /.entry-content -->
  <hr/>
</article>
<article class="hentry">
  <header>
    <h3>
      <a name="what-i-did-last-summer"></a>
      <a href="../what-i-did-last-summer.html" rel="bookmark" title="Permalink to What I did last summer">What I did last summer</a>
    </h3>
  </header>
  <footer class="post-info">
      Published on <abbr class="published" title="2013-10-04T06:00:00"> Fri 04 October 2013 </abbr> under
        <a href="../tag/it-misadventures.html">IT misadventures</a>      </footer><!-- /.post-info -->
  <div class="entry-content"> <p>My three-month break from paid programming work was largely spent dealing with various Real Life issues. I did get to try a few things, however, mostly in September in preparation for various interviews. Here's an overview of those experiences for posterity:</p>
<ul>
<li>
<p>I started on my first Android app. I was surprised by how rich my own testing feedback was - it substantially changed the whole proposition I'd had in mind. Touch UIs really are a completely different ballgame. That's why I can't see myself developing with emulated devices. I don't worry too much about fragmentation, testing on one specimen of each feasible screen size (say 4.5", 7" and 10"). For a modest app that doesn't use any esoteric hardware features, it seems to be working out OK.</p>
</li>
<li>
<p>I took a look at <a href="http://refcardz.dzone.com/refcardz/javaserver-faces-20">JSF 2</a>, <a href="http://refcardz.dzone.com/refcardz/contexts-and-dependency">CDI</a> and the rest of the JEE 5 stack (or at least the web profile). I was pleasantly surprised by how easy it was to deploy a toy application into the various containsers. I tried <a href="http://glassfish.java.net/">GlassFish</a>, <a href="http://tomee.apache.org/apache-tomee.html">TomEE</a> and <a href="https://www.jboss.org/jbossas">JBoss</a>. Especially the latter surprised me as a well-thought-out, approachable piece of software. I even ventured to create a FrankenContainer by mashing up JBoss Weld with Mojarra, Apache OpenEJB, Hibernate JPA etc. That didn't quite work but the few hours of debugging proved amusing.
<br/><br/>
<em>I also used the JEE web profile to implement a basic version of a web app idea I'd had for some time. I deployed to all three containers and there wasn't any issue. I do have to say, though, that I didn't find the experience all that enjoyable. The templating approach taken by JSF 2 is about equally powerful as other mature approaches yet it makes you suffer its baroque verbosity. This became even more apparent when I re-implemented the app in Python (using the <a href="http://www.pylonsproject.org/projects/pylons-framework/about">Pylons</a> framework and <a href="">Mako</a> templating) to keep my OpenBSD home server free of Java. The Python version is much more compact and has much easier URL manipulation. I suppose JEE comes into its own with really big projects.</em></p>
</li>
<li>
<p>I was fortunate to play a little with <a href="http://wicket.apache.org/">Apache Wicket</a>, as well. It feels incredibly fresh compared to JEE. I found the binding between the Java and HTML incarnations of a page to be slightly tighter than I'd expected (the component trees have to match pretty much exactly) and I missed an expression language a bit (not wanting to muck around with Velocity integration) but I found myself doing a lot of work very quickly and fluently. Unless the <a href="http://tech.small-improvements.com/2012/01/11/tuning-wicket-session-size/">heavy sessions</a> are a deal-breaker, I find Wicket a pretty obvious choice for writing web apps.
<br/><br/>
<em>Regarding Wicket, I was amused by how varied the Spring integration examples I found turned out to be. One had the standard Wicket servlet with a Spring context starting in the init method of the Application class. Another used a special Spring dispatcher servlet with the Application class as its init parameter. It goes to show that both technologies are well suited for working with other components (in case of Spring that's the whole point, of course). Having multiple ways of doing the same thing is a mixed blessing but what I saw was pretty easy to follow.</em></p>
</li>
<li>
<p>I wrote a plug-in for the <a href="http://qstardict.ylsoftware.com/index.php">QStarDict</a> desktop dictionary. QStarDict has a really nice <a href="http://qt-project.org/">Qt</a>-based UI and perfect <a href="http://www.kde.org/">KDE</a> integration but I found its German-Czech dataset quite useless. I did found a great German-English dataset that ships with <a href="http://www-user.tu-chemnitz.de/~fri/ding/">another tool</a>, though, so I taught QStarDict to parse it. This was my first "major" C++ undertaking since my high-scool project in 1995 so I spent some time scratching my head over things such as namespaces, references and nested template parameters. In the end it all worked out OK. I have to find the time to polish it a bit and talk to the QStarDict folks to see if it's interesting for them.
<br/><br/>
<em>Working with Qt was a pleasure as always, it all looked rather civilized despite the C++. It even made me feel a bit uneasy the way <a href="http://www.codeproject.com/Articles/570638/Ten-Cplusplus11-Features-Every-Cplusplus-Developer">C++11</a> does. On the one hand, improved safety and readability are generally worthy goals. On the other, the language should signal its fundamentally unsafe nature. Hiding it too well gives a false sense of safety and it somehow feels hypocritical. I do suppose experienced C++ folks working on large projects simply appreciate all the help they can get.</em></p>
</li>
<li>
<p>Finally, for the current project I needed to look into the <a href="http://wiki.eclipse.org/index.php/Rich_Client_Platform">Eclipse Rich Client Platform</a>. It's not trivial and I'm sure I'll keep discovering new facets for a while. It's really nice to interact with the underlying UI libraries (<a href="http://wiki.eclipse.org/SWT">SWT</a> and <a href="http://wiki.eclipse.org/JFace">JFace</a>) simply due to their contrast vis-a-vis <a href="http://en.wikipedia.org/wiki/Swing_(Java)">Swing</a>. Exploring a different way of thinking is always useful as well as fascinating.
<br/><br/>
<em>While investigating Eclipse RCP I stumbled upon <a href="http://wiki.eclipse.org/SWTBot">SWTBot</a>, a functional testing tool for SWT applications. It's not perfect but it seems to be usable. It fits neatly into my toolbox alongside <a href="http://fest.easytesting.org/">FEST</a> and <a href="http://docs.seleniumhq.org/">Selenium</a>.</em></p>
</li>
</ul>
<p><br/>
Now that I look at it, the summer wasn't completely wasted after all! I wish I could've delved into some of the topics a little deeper but so is life. I don't like how I've been neglecting the <a href="http://www.html5rocks.com/en/">JavaScript/HTML/CSS</a> universe. I hope I'll make good use of my commute time to fill this void.</p> </div><!-- /.entry-content -->
  <hr/>
</article>
<article class="hentry">
  <header>
    <h3>
      <a name="pimp-my-calendar-aftermath"></a>
      <a href="../pimp-my-calendar-aftermath.html" rel="bookmark" title="Permalink to PIMp my calendar: Aftermath">PIMp my calendar: Aftermath</a>
    </h3>
  </header>
  <footer class="post-info">
      Published on <abbr class="published" title="2013-04-21T18:55:00"> Sun 21 April 2013 </abbr> under
        <a href="../tag/it-misadventures.html">IT misadventures</a>,        <a href="../tag/android.html">Android</a>,        <a href="../tag/caldav.html">CalDAV</a>      </footer><!-- /.post-info -->
  <div class="entry-content"> <p>I spent some of my free time over the past few weeks trying to get the Calendar app on my Android phone to run with a non-Google and non-MS-Exchange account (see <a href="../pimp-my-calendar-part-1.html">part 1</a>, <a href="../pimp-my-calendar-part-2.html">part 2</a>, <a href="../pimp-my-calendar-part-3.html">part 3</a>, <a href="../pimp-my-calendar-part-4.html">part 4</a> and <a href="../pimp-my-calendar-part-5.html">part 5</a>). As with my <a href="../the-battle-of-the-c5280-aftermath.html">printer woes</a>, it turned out to be an enlightening excercise. I ended up running the <a href="http://radicale.org/">Radicale</a> CALDav server on my home server and Marten Gajda's <a href="http://dmfs.org/caldav/">CalDAV adapter</a> on the little machine. I discovered fun facts about Android and its development tools along the way (the highlight was discovering that changing the minimum API level in Eclipse ADT fails to trigger a re-build).</p>
<p>As for the lessons learned, I guess there is a balance to be struck when troubleshooting a technical issue. One approach involves poking and prodding the system, observing responses and formulating hypotheses. Another option is to study information <em>about</em> the system - source code, documentation, online forums and other resources. Combining these modes optimally is rather delicate and I do tend to err on the side of experimentation. The knowledge it yields may be overly specific and not very reusable but the process fosters a problem-solving mind-set that comes in handy in other situations as well. Besides, documentation may be out of date and, <a href="../pimp-my-calendar-part-4.html">as we've seen</a>, even source code may not be quite what it seems. In fact, what hindered me in resolving the calendaring problem was that I failed to recognize the extent of the system I was working with - namely that it included the development environment.</p> </div><!-- /.entry-content -->
  <hr/>
</article>
<article class="hentry">
  <header>
    <h3>
      <a name="pimp-my-calendar-part-5"></a>
      <a href="../pimp-my-calendar-part-5.html" rel="bookmark" title="Permalink to PIMp my calendar, part 5">PIMp my calendar, part 5</a>
    </h3>
  </header>
  <footer class="post-info">
      Published on <abbr class="published" title="2013-04-21T18:55:00"> Sun 21 April 2013 </abbr> under
        <a href="../tag/it-misadventures.html">IT misadventures</a>,        <a href="../tag/android.html">Android</a>,        <a href="../tag/caldav.html">CalDAV</a>      </footer><!-- /.post-info -->
  <div class="entry-content"> <p>The self-hosted calendaring solution I had been <a href="../pimp-my-calendar-part-4.html">trying to set up</a> turned out not to work due to an incompatibility between my Android phone and the CalDAV client I tried to run on it. My options at this point consisted of</p>
<ol>
<li>upgrading the firmware in my phone to Ice Cream Sandwich or higher</li>
<li>buying a new phone</li>
<li>porting the CalDAV Adapter to the unofficial and unsupported APIs</li>
<li>choosing a different calendaring solution</li>
</ol>
<p>My handset is a <a href="http://www.google.com/url?q=http://en.wikipedia.org/wiki/GeeksPhone_One">Geeksphone One</a> - a sturdy little machine well supported by Cyanogen Mod yet simply too weak to handle anything beyond 2.3.x. It's condemned to stay in the <a href="http://en.wikipedia.org/wiki/File:Android-dist-by-dessert.png">Gingerbread zombie army</a> until I retire it. Buying a new phone is plausible in the mid- to long-term but I do want a slide-out QWERTY keyboard. Looks like I'll have to overcome my allergy to <a href="http://www.gsmarena.com/sony_ericsson_xperia_pro-3779.php">Sony</a>.</p>
<p>I looked into back-porting the <a href="https://github.com/gggard/AndroidCaldavSyncAdapater">CalDAV adapter</a> to the unofficial APIs available in Gingerbread. It seemed like a ton of work with dubious benefits - especially when I found out the work had already been done. You see, the adapter I'd been working with (written by Gérald Garcia) was not the only one I'd found - there is also <a href="http://dmfs.org/caldav/">another adapter</a> written by Marten Gajda which I hadn't considered since it isn't distributed as open-source. It does work under Gingerbread, however, which made a proper impression on me given everything I knew at this stage.</p>
<p>I ended up doing something I hadn't done in years - I purchased and installed a piece of closed-source software. One thing that convinced me was Marten's website which is simple and sticks to the point; the same can be said of the software. Unfortunately, even with a bona-fide polished product on the Android side it wasn't smooth sailing. I had a Radicale instance installed on my notebook for debugging and it talked to the adapter just fine - unlike the home server. Both were running Radicale 0.7 by this point so I compared their OS-specific patches (using <em>apt-get src</em> on my Debian notebook and the ports tree on the OpenBSD home server). One of the Debian patches added automatic creation of calendars which was lacking in the OpenBSD version (this functionality is mentioned in current Radicale documentation but that supposedly refers to 0.7.1; the experiment with <a href="http://www.mozilla.org/projects/calendar/lightning/">Mozilla Lightning</a> in <a href="../pimp-my-calendar-part-3.html">part 3</a> had worked because the Debian version was involved). Porting the patch and installing from ports was a matter of minutes. After that, <strong>everything worked like a charm</strong>.</p> </div><!-- /.entry-content -->
  <hr/>
</article>
<article class="hentry">
  <header>
    <h3>
      <a name="pimp-my-calendar-part-4"></a>
      <a href="../pimp-my-calendar-part-4.html" rel="bookmark" title="Permalink to PIMp my calendar, part 4">PIMp my calendar, part 4</a>
    </h3>
  </header>
  <footer class="post-info">
      Published on <abbr class="published" title="2013-04-21T06:55:00"> Sun 21 April 2013 </abbr> under
        <a href="../tag/it-misadventures.html">IT misadventures</a>,        <a href="../tag/android.html">Android</a>,        <a href="../tag/caldav.html">CalDAV</a>      </footer><!-- /.post-info -->
  <div class="entry-content"> <p><a href="../pimp-my-calendar-part-1.html">Previous</a> <a href="../pimp-my-calendar-part-2.html">parts</a> of the <a href="../pimp-my-calendar-part-3.html">saga</a> brought me to a point where I had an upgraded instance of the <a href="http://radicale.org/">Radicale</a> CalDAV server talking to my Android phone's <a href="https://github.com/gggard/AndroidCaldavSyncAdapater">CalDAV adapter</a> and still getting nowhere. I decided to debug the Android-side code.</p>
<p>Attaching the debugger was <a href="http://stackoverflow.com/questions/5379129/debugging-not-working-in-a-service-class-what-can-cause-this-issue">a bit of a trick</a> since the adapter has no Activity. Once I got past that, I discovered the response from Radicale was getting parsed just fine but it was only happening in an authentication context (i.e. while adding the new "CalDAV account"). I generally found that the adapter was basically a bunch of callbacks and I seemed unable to properly trigger them.</p>
<p>I then noticed something funny in the log (i.e. the LogCat view in the DDMS perspective in Eclipse):</p>
<blockquote>
<p><em>VFY: unable to resolve static field 27 (CONTENT_URI) in Landroid/provider/CalendarContract$Events;</em></p>
</blockquote>
<p>According to the <a href="http://developer.android.com/guide/topics/providers/calendar-provider.html">documentation</a>, <em>Events.CONTENT_URI</em> is one of the basic constants used when working with calendars - how could it be missing? The question led to a quick series of discoveries:</p>
<ul>
<li>My phone runs Android 2.3.7 a.k.a. Gingerbread (well, not really a discovery for me but a key piece of the puzzle).</li>
<li>Proper support for non-Google calendars was only added in version 4.0 a.k.a. Ice Cream Sandwich; what there was before was <a href="http://www.techrepublic.com/blog/app-builder/programming-with-the-android-40-calendar-api-the-good-the-bad-and-the-ugly/825">unofficial and unsupported</a>.</li>
<li>The CalDAV Adapter project lists API level 14 (Ice Cream Sandwich) as the minimum required API level in its Android manifest.</li>
<li>Back when I first tried to run the CalDAV adapter, Eclipse ADT had told me I had no compatible device; I tried modifying the manifest, changing the minimum API level to 10 (Gingerbread).</li>
<li>Changing the minimum API level of an Android project <em>doesn't trigger a re-build in Eclipse ADT</em>; changing the <em>target API level</em> does trigger a re-build.</li>
<li>Once prompted to re-build the project, ADT flags usage of higher-than-minimum-level APIs as an error, breaking the build.</li>
<li>When Dalvik encounters unknown API usage while executing the code, it marks the block where the API was used as <em>dead code</em> and moves on.</li>
</ul>
<p>So I was trying to use an application that was incompatible with my handset and both the development environment and the runtime responded with silent failures. I think ADT in particular behaved quite impolitely. If using APIs beyond the minimum level is off-limits then changing the minimum level should trigger a re-build, right? As for the Android runtime, the <a href="http://developer.android.com/guide/topics/manifest/uses-sdk-element.html#min">documentation</a> says</p>
<blockquote>
<p><em>...the application will crash during runtime when attempting to access the unavailable APIs.</em></p>
</blockquote>
<p>which seems to be false (or at least no indication of a crash reaches the user). In any case, the approach I'd been taking turned out to be a dead end. <em>Continued in <a href="../pimp-my-calendar-part-5.html">part 5</a>.</em></p> </div><!-- /.entry-content -->
  <hr/>
</article>
<article class="hentry">
  <header>
    <h3>
      <a name="pimp-my-calendar-part-3"></a>
      <a href="../pimp-my-calendar-part-3.html" rel="bookmark" title="Permalink to PIMp my calendar, part 3">PIMp my calendar, part 3</a>
    </h3>
  </header>
  <footer class="post-info">
      Published on <abbr class="published" title="2013-04-17T05:45:00"> Wed 17 April 2013 </abbr> under
        <a href="../tag/it-misadventures.html">IT misadventures</a>,        <a href="../tag/android.html">Android</a>,        <a href="../tag/caldav.html">CalDAV</a>      </footer><!-- /.post-info -->
  <div class="entry-content"> <p>My <a href="../pimp-my-calendar-part-1.html">efforts</a> to put a <a href="../pimp-my-calendar-part-2.html">server-backed</a> calendar on my Android phone entered a new phase. I had <a href="http://www.radicale.org/">Radicale</a> on the server and the <a href="https://github.com/gggard/AndroidCaldavSyncAdapater">CalDAV adapater</a> on the phone but they seemed to talk past each other. My phone would set up a CalDAV account successfully but then tell me "You have no calendar" when I tried to create events.</p>
<p>Radicale documentation says calendars are created automagically based on a URL convention, i.e. simply accessing a non-existent calendar should bring it into existence. I tried it with the Mozilla Lightning client and it worked as advertised. The Android adapter, however, still wouldn't see the new calendar nor its events.</p>
<p><a href="http://www.wireshark.org">WireShark</a> revealed that a CalDAV client apparently enjoys a lot of freedom when formulating requests. A PROPFIND request from Lightning looked like this:</p>
<div class="codehilite"><pre><span class="nt">&lt;D:propfind</span> <span class="na">xmlns:D=</span><span class="s">&quot;DAV:&quot;</span>
    <span class="na">xmlns:CS=</span><span class="s">&quot;http://calendarserver.org/ns/&quot;</span>
    <span class="na">xmlns:C=</span><span class="s">&quot;urn:ietf:params:xml:ns:caldav&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;D:prop&gt;</span>
    <span class="nt">&lt;D:resourcetype/&gt;</span>
    <span class="nt">&lt;D:owner/&gt;</span>
    <span class="nt">&lt;D:supported-report-set/&gt;</span>
    <span class="nt">&lt;C:supported-calendar-component-set/&gt;</span>
    <span class="nt">&lt;CS:getctag/&gt;</span>
  <span class="nt">&lt;/D:prop&gt;</span>
<span class="nt">&lt;/D:propfind&gt;</span>
</pre></div>


<p>whereas the Android adapter was sending</p>
<div class="codehilite"><pre><span class="nt">&lt;d:propfind</span> <span class="na">xmlns:d=</span><span class="s">&quot;DAV:&quot;</span>
    <span class="na">xmlns:c=</span><span class="s">&quot;urn:ietf:params:xml:ns:caldav&quot;</span>
    <span class="na">xmlns:cs=</span><span class="s">&quot;http://calendarserver.org/ns/&quot;</span>
    <span class="na">xmlns:ic=</span><span class="s">&quot;http://apple.com/ns/ical/&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;d:prop&gt;</span>
    <span class="nt">&lt;d:displayname</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;d:resourcetype</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;cs:getctag</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/d:prop&gt;</span>
<span class="nt">&lt;/d:propfind&gt;</span>
</pre></div>


<p>and it seemed Radicale was not happy with the <em>displayname</em> bit:</p>
<div class="codehilite"><pre><span class="nx">...</span>
<span class="o">&lt;</span><span class="nx">propstat</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">prop</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nb">displayname</span> <span class="o">/&gt;</span>
  <span class="o">&lt;/</span><span class="nx">prop</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nb">status</span><span class="o">&gt;</span><span class="nx">HTTP</span><span class="p">/</span><span class="nx">1.1</span> <span class="mi">404</span> <span class="ow">Not</span> <span class="nx">Found</span><span class="o">&lt;/</span><span class="nb">status</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nx">propstat</span><span class="o">&gt;</span>
<span class="nx">...</span>
</pre></div>


<p>Server-side source code revealed that Radicale returns 404 for properties which it does not recognize (see the final <em>else</em> in the long <em>if-elif</em> chain in <em>_propfind_response()</em> in <em>xmlutils.py</em>). My installed version of Radicale was 0.7. I downloaded the most recent stable release (0.7.1) from the project site and tried that instead. Lo and behold, it finally said</p>
<div class="codehilite"><pre><span class="nt">&lt;multistatus</span> <span class="na">xmlns=</span><span class="s">&quot;DAV:&quot;</span>
    <span class="na">xmlns:C=</span><span class="s">&quot;urn:ietf:params:xml:ns:caldav&quot;</span>
    <span class="na">xmlns:CS=</span><span class="s">&quot;http://calendarserver.org/ns/&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;response&gt;</span>
    <span class="nt">&lt;href&gt;</span>/jh/calendar/<span class="nt">&lt;/href&gt;</span>
    <span class="nt">&lt;propstat&gt;</span>
      <span class="nt">&lt;prop&gt;</span>
        <span class="nt">&lt;displayname&gt;</span>calendar<span class="nt">&lt;/displayname&gt;</span>
        <span class="nt">&lt;resourcetype&gt;</span>
          <span class="nt">&lt;C:calendar</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;collection</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/resourcetype&gt;</span>
        <span class="nt">&lt;CS:getctag&gt;</span>&quot;0&quot;<span class="nt">&lt;/CS:getctag&gt;</span>
      <span class="nt">&lt;/prop&gt;</span>
      <span class="nt">&lt;status&gt;</span>HTTP/1.1 200 OK<span class="nt">&lt;/status&gt;</span>
    <span class="nt">&lt;/propstat&gt;</span>
  <span class="nt">&lt;/response&gt;</span>
<span class="nt">&lt;/multistatus&gt;</span>
</pre></div>


<p>The Calendar app on my phone, however, <em>still</em> insisted I had no calendar. <em>Continued in <a href="../pimp-my-calendar-part-4.html">part 4</a>.</em></p> </div><!-- /.entry-content -->
  <hr/>
</article>
<article class="hentry">
  <header>
    <h3>
      <a name="pimp-my-calendar-part-2"></a>
      <a href="../pimp-my-calendar-part-2.html" rel="bookmark" title="Permalink to PIMp my calendar, part 2">PIMp my calendar, part 2</a>
    </h3>
  </header>
  <footer class="post-info">
      Published on <abbr class="published" title="2013-04-08T04:00:00"> Mon 08 April 2013 </abbr> under
        <a href="../tag/it-misadventures.html">IT misadventures</a>,        <a href="../tag/android.html">Android</a>,        <a href="../tag/caldav.html">CalDAV</a>      </footer><!-- /.post-info -->
  <div class="entry-content"> <p>My effort to set up a <a href="../pimp-my-calendar-part-1.html">self-hosted calendaring</a> solution is taking on epic proportions, turning into another <a href="../the-battle-of-the-c5280-aftermath.html">CUPS saga</a>:</p>
<ul>
<li>I quickly discarded the <a href="https://play.google.com/store/apps/details?id=org.kc.and.ical">local iCal option</a> because I can't trust a piece of closed-source freeware from someone calling themselves "Khaos".</li>
<li>The <a href="http://code.google.com/p/kolab-android/">Kolab connector</a> dropped out of the race because Kolab itself has complex dependencies and no OpenBSD package.</li>
<li><a href="http://www.zafara.com">Zafara</a> just felt too heavy-weight and, well, corporate for my needs.</li>
</ul>
<p>I decided to concentrate on CalDAV servers with existing OpenBSD packages: <a href="http://www.davical.org/">DAVical</a>, <a href="http://owncloud.org/">ownCloud</a>, <a href="http://www.radicale.org/">Radicale</a> and <a href="http://code.google.com/p/sabredav/">SabreDAV</a>. All except Radicale were PHP-based which made my decision easy as I'm <a href="http://me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design/">allergic to PHP</a>. I have to admit, though, ownCloud looks mighty fine and seems to have a lot of momentum.</p>
<p>Radicale has a no-nonsense, focused feel. It is written in Python which is very nice indeed. Installing it was a breeze. I then tried to set up a calendar in Kontact and failed miserably. CalDAV support in Akonadi is apparently confined to a legacy KResource implementation and <em>blah blah blah</em>. I had no stamina to go there. What was important was my phone.</p>
<p>Installing Gérald Garcia's open-source <a href="https://github.com/gggard/AndroidCaldavSyncAdapater">AndroidCaldavSyncAdapater</a> via Google Play would have been a snap. The thing is, just as I don't want Google knowing about my appointments I don't want it knowing what I run on my phone. Don't get me wrong - I'm quite fond of Google. I'm simply more fond of my privacy.</p>
<p>Installing the adapter from GitHub turned out to be quite smooth. Once I cloned the repository I found out the project relied on the <a href="http://developer.android.com/tools/sdk/eclipse-adt.html">ADT Eclipse plugin</a> for building and signing the installation package - no trouble there. I had a bit of fun getting ADT to <a href="http://developer.android.com/tools/device.html">see my phone</a> because I made a typo in the <em>udev</em> rule file. I figured it out eventually and got the package onto the phone.</p>
<p>Adding a Radicale account on Android involved going to <em>Settings &gt; Accounts &amp; sync &gt; Add account &gt; CalDAV Sync Adapter</em> and filling out my user name, password and the URL. Excited, I opened the calendar application. No nagging about MS Exchange - great. Alas, when I tried to create an event I was told "You have no calendars." <em>Continued in <a href="../pimp-my-calendar-part-3.html">part 3</a>.</em></p> </div><!-- /.entry-content -->
  <hr/>
</article>
            <a href="#" class="disabled">&laquo;</a>
        Page 1 / 4
            <a href="../tag/it-misadventures2.html">&raquo;</a>
    </section><!-- /#content -->
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
  </div><!-- /.main-column -->
  </div><!-- /.all -->
</body>
</html>